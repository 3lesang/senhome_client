---
import MenuItem from "./menu-item.astro";
import MenuList from "./menu-list.astro";

interface Props {
  data?: any[] | null | undefined;
}

const { data } = Astro.props;
---

<nav>
  <div class="hidden md:flex items-center space-x-4">
    {
      data?.map((item) => {
        const renderItem = (data: any) => {
          return data?.map((child: any) => {
            if (!child?.children?.length) {
              return (
                <a
                  href={child?.link}
                  class="block w-full text-left px-4 py-2 hover:bg-gray-100"
                >
                  {child?.name}
                </a>
              );
            }
            return (
              <MenuItem>
                <a
                  href={child?.link}
                  class="block w-full text-left px-4 py-2 hover:bg-gray-100"
                  slot="trigger"
                >
                  {child?.name}
                </a>
                <div class="bg-white shadow w-48 relative h-full">
                  {renderItem(child?.children)}
                </div>
              </MenuItem>
            );
          });
        };

        if (item?.children?.length) {
          return (
            <MenuList>
              <a href={item?.link} class="block px-4 py-2" slot="trigger">
                {item?.name}
              </a>
              <div class="bg-white shadow w-48 relative h-full">
                {renderItem(item?.children)}
              </div>
            </MenuList>
          );
        }
        return (
          <a href={item?.link} class="hover:text-gray-900 px-3 py-2">
            {item?.name}
          </a>
        );
      })
    }
  </div>
</nav>
